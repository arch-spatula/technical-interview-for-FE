# 검색창에 구글이라고 검색하면 어떻게 되나요?

```txt
https://naver.com을 주소창에 입력했을 때 일어나는 과정에 대해 아는 만큼 설명해주실 수 있을까요?
```

답변일자: 2023.03.20.

브라우저는 URL 정보를 갖고 IP를 정보를 얻어야 합니다. 제일 먼저 브라우저의 캐시를 확인하고 캐시 미스가 발생하면 운영체제에 캐시된 정보를 찾습니다. 운영체제도 캐시 미스가 발생하면 인터넷 쿼리 요청을 보냅니다. 제일먼저 DNS 서버는 요청을 받으면 DNS lookup으로 도메인에 해당하는 IP있는지 확인합니다. 캐시미스가 발생하면 다른 DNS 서버로 캐시히트로 Resolve가 발생할 때까지 요청을 연쇄적으로 보냅니다. 캐시히트가 발생하고 브라우저가 IP 정보를 갖으면 브라우저는 해당하는 IP 주소의 서버와 TCP 통신을 연결하게 됩니다. 연결하기 위해 몇 회 왕복하는 과정을 보고 TCP 핸드 쉐이크라고 부릅니다. TCP로 연결에 성공하면 클라이언트는 서버로 http 요청을 보내게 됩니다. 여기서 https로 요청을 보내게 되면 보안을 추가 단계들이 생깁니다. 브라우저는 리소스를 응답받고 처리하는데 자바스크립트 번들이나 이미지처럼 추가 리소스는 이 과정을 반복합니다.

답변일자: 2023.03.19.

브라우저는 엔진은 요청을 보내게 됩니다. 인터넷 선 혹은 와이파이로 신호를 보냅니다. 와이파이 혹은 인터넷 선은 인터넷 제공 사업자의 망을 통해 DNS 서버를 접근합니다. DNS는 도메인을 확인하고 IP로 변환하는 서버입니다. 또 DNS 서버는 자주 오는 요청을 캐싱하고 캐시힛이면 응답을 합니다. 하지만 캐시미스가 되면 다음 DNS 서버로 접근합니다. 계속 캐시미스가 발생하면 IP에 해당하는 서버에 도착하게 됩니다. 요청을 받은 서버는 요청 내용을 확인하고 클라이언트 IP로 응답을 보냅니다.

[What happens when you type a URL into your browser?](https://www.youtube.com/watch?v=AlkDbnbv7dk)

http 요청과 응답과정입니다.

먼저 사용자가 브라우저에 입력한 것은 URL입니다. URL은 Universal Resource Locator의 약어입니다. 크게 4부분으로 나눌 수 있습니다.

프로토콜 혹은 스키마입니다. http, https가 존재합니다. https는 연결시 보안됩니다. 다음은 도메인입니다. 세번째 부분은 path이고 네번째 부분은 Resource입니다. 이 관계는 파일시스템의 디렉토리와 유사합니다.

브라우저는 서버를 접근하는 법을 알아야 합니다. 이 이 과정은 DNS look업의 과정을 거칩니다. DNS는 도메인 네임 시스템의 약어입니다. 인터넷의 전화번호부와 같습니다. 도메인을 IP와 짝으로 확인합니다. DNS만 따로 다뤄야 할 서비스가 될 정도로 나중에 다룹니다. DNS lookup은 최대한 속도를 높이기 위해 캐싱이 많이 되어 있습니다. 먼저 브라우저도 짧은 시간동안 캐싱을 합니다. 캐시미스가 발생하면 운영체제에서 저장하고 있는지 접근합니다. 운영체제도 캐시가 또 있습니다. 운영체제도 없으면 인터넷으로 쿼리 요청을 보냅니다. DNS Resolver에 요청을 보내게 됩니다. 해당하는 IP를 찾을 때까지 연쇄적으로 요청을 보냅니다. DNS 인프라의 여러 서버들과 상호작용하고 접근하는 과정입니다. 접근하는 DNS 마다 응답을 캐싱하게 됩니다. 결국 브라우저는 DNS를 통해 IP 주소를 얻게 됩니다. 다음은 브라우저는 해당하는 서버와 TCP 통신을 연결합니다. TCP 통신을 연결할 때는 필요한 핸드쉐이크가 있습니다. 몇회의 네트워크 왕복이 필요합니다. 로딩 시간을 빠르게 하기 위해 현대 브라우저들은 keep alive connection을 활용합니다. 이미 서버랑 설정되었던 TCP 연결을 최대한 재사용하는 것입니다. 알아야할 것은 https는 TCP 연결을 하는 단계가 늘어납니다. SSL/TLS 핸드 쉐이크 과정이 필요합니다. 암호화된 연결을 브라우저와 서버 사이 만들어내기 위한 핸드 쉐이크 연산비용이 비쌉니다.

브라우저는 SSL 세션 재개를 활용해서 비용절약에 활용합니다. 마지막으로 브라우저는 연결 TCP 연결이 된 서버에 HTTP 요청을 보내게 됩니다. HTTP 자체는 비교적 단순한 프로토콜입니다.

서버는 요청을 처리하고 응답을 보냅니다.

브라우저는 응답을 받고 HTTP로 받은 리소스를 처리 및 랜더링합니다. 가끔은 추가로 처리할 리소스들이 있습니다. 자바스크립트 번들 및 이미지 같은 것들입니다. 남은 리소스를 얻기 위해 브라우저는 이 과정을 또 반복하게 됩니다.

---

[Everything You Need to Know About DNS (Domain Name System)](https://www.youtube.com/watch?v=27r4Bzuj5NQ)

DNS는 인터넷의 디렉토리입니다. 사람이 읽이 편한 네이버를 기계가 읽기 편한 IP 주소로 변환합니다. DNS 서버는 각각 다른 위계를 갖고 있습니다.

# 인터넷은 무엇인가?

# OSI 7계층에 대해서 설명해주세요.

# http랑 https가 각각 다른 port 번호를 갖는 이유를 설명해주십시오.

https://johngrib.github.io/wiki/why-http-80-https-443/

포트번호를 지정할 때 당시 남았던 번호를 지정하면서 갖게 되었습니다. 특별한 의미가 있던 것은 아니었습니다.

## 포트번호를 지정하는 기관의 이름은 무엇인가?

# http, https, webRTC, ws, RTSP(실시간 스트리밍) 이외 프로토콜이 뭐가 존재하는지 알려주세요.

# RTT (Round Trip Time, 왕복 시간)란?

# TCP 3 way handshake란 무엇인지 설명해주실 수 있을까요?

TCP는 Transmission Control Protocol의 약어입니다. TCP 3-way handshake는 클라이언트와 서버사이 데이터 전송을 보장하기 위해 연결을 설정하는 과정입니다. IP는 가장 효율적인 목적지만 찾고 TCP로 순서와 전달여부를 보장하게 만드는 방식으로 통신을 합니다. 핸드쉐이크가 이루어지는 과정은 클라이언트가 보안을 위해 난수로 서버에 보냅니다. 서버는 통신이 성공했다는 것을 인식시키기 위해 ack로 1을 더하고 syn에 해당하는 난수를 함께 클라이언트에 전송합니다. 이것을 보고 syn/ack에 해당합니다. 마지막으로 ack를 받은 클라이언트는 1을 더하고 서버에 전송합니다.

[What is the TCP 3-Way Handshake and Why Backend Engineers should understand it](https://www.youtube.com/watch?v=bW_BILl7n0Y)

# https 보안절차

[SSL, TLS, HTTPS Explained](https://www.youtube.com/watch?v=j9QmMEWmcfo)

http로 비밀번호, 신용카드 정보를 전송하면 평서문으로 전송됩니다. https는 암호화된 문자로 전송됩니다. 중간에 탈취되어도 해커는 정보를 복호화 해야합니다.

브라우저는 TCP 통신을 구축합니다.

# TCP 와 UDP 를 비교하여 설명해주실 수 있을까요?

> UDP(User Datagram Protocol)와 TCP(Transmission Control Protocol)는 인터넷 프로토콜 스위트(Internet Protocol Suite)의 일부로, 컴퓨터 네트워크에서 데이터 전송을 위해 사용되는 두 가지 프로토콜입니다.
>
> UDP는 신뢰성이 낮은 데이터그램 데이터 전송 프로토콜입니다. UDP는 패킷의 크기가 작고, 패킷 로스가 발생하더라도 재전송이 이루어지지 않기 때문에, 전송 속도가 빠르고 오버헤드가 적습니다. 그러나, UDP는 데이터를 전송하기 전에 연결 설정 절차가 없기 때문에, 데이터를 보내고 받는 순서가 보장되지 않으며, 데이터 무결성이 보장되지 않습니다. 그렇기 때문에, 비디오 스트리밍, DNS 조회와 같이 속도가 빠른 데이터 전송이 필요한 경우에 주로 사용됩니다.
>
> 반면에 TCP는 신뢰성 있는 연결 지향적인 프로토콜로, 연결 설정 및 해제 절차를 통해, 데이터 전송에 대한 신뢰성, 무결성 및 순서를 보장합니다. TCP는 패킷의 크기가 크고, 재전송이 발생하면 재전송을 수행하기 때문에 오버헤드가 UDP에 비해 큽니다. 그러나, 데이터의 전송 순서와 무결성이 보장되기 때문에, 파일 전송, 이메일 전송 등의 신뢰성이 중요한 데이터 전송에 주로 사용됩니다.
>
> 따라서, UDP와 TCP는 데이터 전송에 있어서 사용되는 프로토콜로, UDP는 빠른 전송을 중요시하는 대신 데이터 무결성을 보장하지 않고, TCP는 신뢰성이 중요한 대신, 느리지만 데이터 무결성과 전송 순서를 보장합니다.
>
> - chatGPT

---

UDP와 TCP모두 네트워크 데이터 중 페킷을 전달하는 프로토콜입니다. TCP의 경우 3-way-handshake로 연결 검증 통신 4-way-handshake로 연결을 종료하는 프로토콜입니다. 즉, 연결 상태를 확인하고 패킷의 순서와 전송여부를 신뢰할 수 있습니다. 이런 프로토콜로 무결성을 보장할 수 있습니다. 하지만 속도가 느리고 오버헤드가 발생합니다. 그래서 신뢰가 중요한 이메일같은 통신에 많이 활용합니다. 반면 UDP는 연결 설정과 해제 과정이 없습니다. 패킷에 대한 순서 유실이 발생해도 재전송하지 않습니다. 그래서 무결성을 보장할 수 없습니다. 이런 이유로 신뢰가 중요하지 않고 속도가 중요한 경우인 비디오 스트리밍 혹은 DNS 조회에 많이 활용합니다.
